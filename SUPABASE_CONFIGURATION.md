# üö® CRITICAL: Supabase Dashboard Configuration for Production

## Issue Resolution: Localhost URLs in Production

### Problem
Production users receive error URLs with `localhost:3000` instead of the production domain `https://dominatelocalleadsai.sliplane.app`.

**Example Error URL:**
```
http://localhost:3000/?error=access_denied&error_code=otp_expired&error_description=Email+link+is+invalid+or+has+expired
```

**Should Be:**
```
https://dominatelocalleadsai.sliplane.app/?error=access_denied&error_code=otp_expired&error_description=Email+link+is+invalid+or+has+expired
```

### Root Cause
The error URLs are generated by **Supabase's internal error redirect mechanism**, not by the application code. When password reset emails expire or have issues, Supabase redirects to the configured "Site URL" in the Dashboard with error parameters.

## Required Supabase Dashboard Configuration

### Step 1: Navigate to Authentication Settings
1. Go to your Supabase project dashboard
2. Click **"Authentication"** in the left sidebar
3. Click **"URL Configuration"** tab

### Step 2: Configure Site URL
**CRITICAL:** Set the Site URL to your production domain:

```
Site URL: https://dominatelocalleadsai.sliplane.app
```

**‚ùå DO NOT USE:** `http://localhost:3000` or any localhost URL

### Step 3: Configure Redirect URLs
Add the following URLs to the **"Redirect URLs"** list:

**Production URLs (Required):**
```
https://dominatelocalleadsai.sliplane.app/auth/reset-password
https://dominatelocalleadsai.sliplane.app
```

**Development URLs (Optional for local testing):**
```
http://localhost:3001/auth/reset-password
http://localhost:3001
```

### Step 4: Save Configuration
1. Click **"Save"** at the bottom of the URL Configuration page
2. Changes take effect immediately

## Configuration Validation

### How to Verify Correct Configuration
1. **Check Site URL:** Should be `https://dominatelocalleadsai.sliplane.app`
2. **Check Redirect URLs:** Should include production URLs listed above
3. **Test Password Reset:** Send a test password reset email and check the URLs

### Expected Behavior After Fix
- ‚úÖ Error URLs use production domain `https://dominatelocalleadsai.sliplane.app`
- ‚úÖ Password reset emails redirect to production domain
- ‚úÖ All authentication flows work with production URLs
- ‚úÖ No localhost URLs appear in production environment

## Additional Security Considerations

### PKCE Flow Configuration
Ensure PKCE (Proof Key for Code Exchange) is enabled:
1. Go to **Authentication** ‚Üí **Settings**
2. Under **"Auth Providers"**, ensure **"Enable PKCE flow"** is checked
3. This is required for secure password reset flows

### Email Template Configuration
If using custom email templates:
1. Go to **Authentication** ‚Üí **Email Templates**
2. Ensure all template URLs reference `{{ .SiteURL }}` variable
3. Do not hardcode localhost URLs in templates

## Troubleshooting

### Still Seeing Localhost URLs?
1. **Clear browser cache** after making changes
2. **Wait 5-10 minutes** for DNS/CDN propagation
3. **Check application logs** for environment variable issues
4. **Verify Supabase project** is the correct one for production

### Application Environment Variables
Ensure these are set in production deployment:
```bash
NEXT_PUBLIC_SITE_URL=https://dominatelocalleadsai.sliplane.app
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### Contact Information
If issues persist after configuration:
1. Check application logs for detailed error information
2. Verify Supabase project settings match production requirements
3. Ensure DNS and SSL certificates are properly configured

---

**‚ö†Ô∏è IMPORTANT:** The Site URL configuration in Supabase Dashboard is the primary source of error redirect URLs. Application code fallbacks are secondary and should not be relied upon for production error handling.